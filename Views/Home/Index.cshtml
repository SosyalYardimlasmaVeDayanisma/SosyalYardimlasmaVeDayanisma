@{
    ViewData["Title"] = "Ana Sayfa";
    var featuredCampaigns = ViewBag.FeaturedCampaigns as List<Campaign>;
    var allCategories = ViewBag.AllCategories as List<dynamic>;
    var wallet = ViewBag.Wallet as Wallet;
    var activeCampaignCount = ViewBag.ActiveCampaignCount as int? ?? 0;
    var totalRaised = ViewBag.TotalRaised as decimal? ?? 0;
    var totalRewards = ViewBag.TotalRewards as int? ?? 0;
}

<div class="container page-container">
    <section class="hero">
        <h1>
            KatkÄ± SaÄŸla, Puan Kazan
        </h1>
        <p>
            Afet yardÄ±mÄ±, hayvan refahÄ±, Ã§ocuk eÄŸitimi ve doÄŸa koruma alanlarÄ±nda dayanÄ±ÅŸma alanlarÄ±na destek ol. 
            Her katkÄ±nÄ±zla puan kazanÄ±n, destekÃ§i iÅŸletmelerde indirimlerden faydalananÄ±n.
        </p>
        <div class="hero-actions">
            <a href="/Campaigns" class="btn btn-primary btn-lg">
                DayanÄ±ÅŸma AlanlarÄ±na GÃ¶z At
            </a>
            <a href="/Volunteer" class="btn btn-outline btn-lg">
                GÃ¶nÃ¼llÃ¼ Ol
            </a>
        </div>
    </section>

    <section class="stats-grid">
        <div class="card stat-card">
            <svg class="stat-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
            </svg>
            <div class="stat-value">@activeCampaignCount</div>
            <div class="stat-label">Aktif DayanÄ±ÅŸma AlanÄ±</div>
        </div>
        <div class="card stat-card">
            <svg class="stat-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <div class="stat-value">
                @if (totalRaised >= 1000000)
                {
                    <text>â‚º@((totalRaised / 1000000).ToString("F1"))M</text>
                }
                else if (totalRaised >= 1000)
                {
                    <text>â‚º@((totalRaised / 1000).ToString("F1"))K</text>
                }
                else
                {
                    <text>â‚º@totalRaised.ToString("N0")</text>
                }
            </div>
            <div class="stat-label">Toplanan KatkÄ±</div>
        </div>
        <div class="card stat-card">
            <svg class="stat-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
            </svg>
            <div class="stat-value">@totalRewards</div>
            <div class="stat-label">DÃ¶nÃ¼ÅŸÃ¼m SeÃ§eneÄŸi</div>
        </div>
    </section>

    <!-- Destek AlanlarÄ± -->
    <section style="margin-bottom: 64px;">
        <h2 style="font-size: 28px; font-weight: 700; text-align: center; margin-bottom: 16px; color: var(--text-primary);">
            Destek AlanlarÄ±mÄ±z
        </h2>
        <p style="text-align: center; color: var(--text-secondary); max-width: 600px; margin: 0 auto 40px;">
            Ä°yilik ekosistemimizde birÃ§ok farklÄ± alanda toplumsal deÄŸer yaratÄ±yoruz. AÅŸaÄŸÄ±daki kategorilerde destek saÄŸlayabilirsiniz.
        </p>
        <div class="grid grid-4" style="gap: 20px;">
            @if (allCategories != null)
            {
                @foreach (var category in allCategories)
                {
                    var iconMap = new Dictionary<string, string>
                    {
                        { "AfetAcilDurum", "ğŸš¨" },
                        { "EgitimCocuk", "ğŸ“š" },
                        { "Saglik", "ğŸ¥" },
                        { "Hayvanlar", "ğŸ¾" },
                        { "GidaTemelIhtiyac", "ğŸ²" },
                        { "CevreVeDoga", "ğŸŒ±" },
                        { "EngelliDogumluBireyler", "â™¿" },
                        { "YasliDestegi", "ğŸ‘´" },
                        { "KulturSanat", "ğŸ¨" },
                        { "HayalGerceklestirme", "âœ¨" },
                        { "SporVeRekreasyon", "âš½" },
                        { "TeknolojiveYenilikcilik", "ğŸ’¡" }
                    };
                    var icon = iconMap.ContainsKey(category.Value.ToString()) ? iconMap[category.Value.ToString()] : "ğŸ’š";
                    
                    <div class="card" style="text-align: center; padding: 24px; transition: all 0.3s; cursor: default;">
                        <div style="font-size: 40px; margin-bottom: 12px;">@icon</div>
                        <h3 style="font-size: 14px; font-weight: 600; color: var(--text-primary); margin: 0;">
                            @category.DisplayName
                        </h3>
                    </div>
                }
            }
        </div>
    </section>

    <div class="content-grid">
        <div>
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 32px; padding-bottom: 20px; border-bottom: 2px solid var(--border-light);">
                <div>
                    <h2 style="font-size: 28px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">
                        Ã–ne Ã‡Ä±kan DayanÄ±ÅŸma AlanlarÄ±
                    </h2>
                    <p style="font-size: 14px; color: var(--text-secondary); margin: 0;">
                        Destek alanlarÄ±mÄ±zdan seÃ§ilmiÅŸ Ã¶rnek dayanÄ±ÅŸma alanlarÄ±
                    </p>
                </div>
                <a href="/Campaigns" class="btn btn-outline btn-sm">
                    TÃ¼mÃ¼nÃ¼ GÃ¶r
                </a>
            </div>
            <div class="campaigns-list">
                @if (featuredCampaigns != null && featuredCampaigns.Any())
                {
                    @foreach (var campaign in featuredCampaigns)
                    {
                        @await Html.PartialAsync("_DonationCard", campaign)
                    }
                }
                else
                {
                    <div class="card empty-state">
                        <p>Kampanyalar yÃ¼kleniyor...</p>
                    </div>
                }
            </div>
        </div>

        @if (wallet != null)
        {
            <div>
                @await Html.PartialAsync("_WalletWidget", wallet)
            </div>
        }
    </div>
</div>
